{
    "$schema": "https://raw.githubusercontent.com/lukesampson/scoop/master/schema.json",
    "version": "1.21.77",
    "description": "Secure, Fast & Private Web Browser with Adblocker.",
    "homepage": "https://brave.com",
    "license": {
        "identifier": "Freeware,BSD-3-Clause,GPL-3.0-only,...",
        "url": "https://github.com/brave/brave-browser/blob/master/LICENSE"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/brave/brave-browser/releases/download/v1.21.77/BraveBrowserStandaloneSetup.exe#/dl.exe",
            "hash": "4b15a889db2ad57e8512bec8ec7f5e1f356a4a74b03c8fa880e9a6050905c13c"
        },
        "32bit": {
            "url": "https://github.com/brave/brave-browser/releases/download/v1.21.77/BraveBrowserStandaloneSetup32.exe#/dl.exe",
            "hash": "a7d95745651e777fe1678b3636ece8849d86493355ef8187dcf7a88cd4ca9f48"
        }
    },
    "installer": {
        "script": [
            "$time = (Get-Date)",
            "$guid = '{AFE6A462-C574-4B8A-AF43-4CC60DF4563B}'",
            "$extract = (Start-Process -FilePath \"$dir\\dl.exe\" -ArgumentList '-Extract' -PassThru)",
            "While (-not (Get-ChildItem -Path \"$env:TEMP\\GUM*.tmp\" -Depth 1 -Filter \"brave_installer_*_$($version -replace '\\.', '_').exe.$guid\" |",
            "    Where-Object { $_.LastAccessTime -gt $time})) {}",
            "$7zFile = (Get-ChildItem -Path \"$env:TEMP\\GUM*.tmp\" -Depth 1 -Filter \"brave_installer_*_$($version -replace '\\.', '_').exe.$guid\" |",
            "    Sort-Object $_.LastAccessTime -Descending |",
            "    Select-Object -First 1).FullName",
            "Do {",
            "    $7zFileSize = (Get-Item \"$7zFile\").Length",
            "    Start-Sleep -Milliseconds 250",
            "} While (-not ($7zFileSize -eq (Get-Item \"$7zFile\").Length))",
            "Stop-Process -Id $extract.Id",
            "Expand-7zipArchive -Path \"$7zFile\" -DestinationPath \"$dir\"",
            "Expand-7zipArchive -Path \"$dir\\chrome.7z\" -ExtractDir 'Chrome-bin' -Removal",
            "Remove-Item -Force -Path \"$dir\\dl.exe\""
        ]
    },
    "bin": "brave.exe",
    "shortcuts": [
        [
            "brave.exe",
            "Brave"
        ]
    ],
    "checkver": {
        "url": "https://brave.com/latest/",
        "regex": "<strong>V([\\d.]+)</strong>"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/brave/brave-browser/releases/download/v$version/BraveBrowserStandaloneSetup.exe#/dl.exe"
            },
            "32bit": {
                "url": "https://github.com/brave/brave-browser/releases/download/v$version/BraveBrowserStandaloneSetup32.exe#/dl.exe"
            }
        }
    }
}
